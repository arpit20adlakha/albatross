{
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "http"
  ],
  "swagger": "2.0",
  "info": {
    "description": "Albatross is a helm cli wrapper and enables using helm via http calls",
    "title": "Albatross API.",
    "version": "0.1.1"
  },
  "host": "localhost:8080",
  "paths": {
    "/releases/{kube_context}": {
      "get": {
        "description": "List helm releases in the kubecontext as specified by query params",
        "produces": [
          "application/json"
        ],
        "schemes": [
          "http"
        ],
        "tags": [
          "release"
        ],
        "operationId": "listOperation",
        "parameters": [
          {
            "type": "string",
            "format": "string",
            "default": "minikube",
            "name": "kube_context",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "name": "namespace",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": true,
            "name": "all_namespaces",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "deployed",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "uninstalled",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "failed",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "pending",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "uninstalling",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/listResponse"
          },
          "400": {
            "$ref": "#/responses/listResponse"
          },
          "404": {
            "$ref": "#/responses/listResponse"
          },
          "500": {
            "$ref": "#/responses/listResponse"
          }
        }
      }
    },
    "/releases/{kube_context}/{namespace}/{release_name}": {
      "put": {
        "description": "Install helm release at the specified location",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "http"
        ],
        "tags": [
          "release"
        ],
        "operationId": "installOperation",
        "parameters": [
          {
            "type": "string",
            "format": "string",
            "default": "minikube",
            "name": "kube_context",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "default",
            "name": "namespace",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "mysql-final",
            "name": "release_name",
            "in": "path",
            "required": true
          },
          {
            "name": "Body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/installRequestBody"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/installResponse"
          },
          "400": {
            "$ref": "#/responses/installResponse"
          },
          "404": {
            "$ref": "#/responses/installResponse"
          },
          "500": {
            "$ref": "#/responses/installResponse"
          }
        }
      },
      "post": {
        "description": "Install helm release at the specified location",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "http"
        ],
        "tags": [
          "release"
        ],
        "operationId": "upgradeOperation",
        "parameters": [
          {
            "type": "string",
            "format": "string",
            "default": "minikube",
            "name": "kube_context",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "default",
            "name": "namespace",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "mysql-final",
            "name": "release_name",
            "in": "path",
            "required": true
          },
          {
            "name": "Body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/upgradeRequestBody"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/listResponse"
          },
          "400": {
            "$ref": "#/responses/listResponse"
          },
          "404": {
            "$ref": "#/responses/listResponse"
          },
          "500": {
            "$ref": "#/responses/listResponse"
          }
        }
      },
      "delete": {
        "description": "Uninstall a helm release as specified in the request",
        "produces": [
          "application/json"
        ],
        "schemes": [
          "http"
        ],
        "tags": [
          "release"
        ],
        "operationId": "uninstallOperation",
        "parameters": [
          {
            "type": "string",
            "format": "string",
            "default": "minikube",
            "name": "kube_context",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "default",
            "name": "namespace",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "format": "string",
            "default": "mysql-final",
            "name": "release_name",
            "in": "path",
            "required": true
          },
          {
            "type": "boolean",
            "default": false,
            "name": "dry_run",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "keep_history",
            "in": "query"
          },
          {
            "type": "boolean",
            "default": false,
            "name": "disable_hooks",
            "in": "query"
          },
          {
            "type": "integer",
            "default": 300,
            "name": "timeout",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/uninstallResponse"
          },
          "400": {
            "$ref": "#/responses/uninstallResponse"
          },
          "404": {
            "$ref": "#/responses/uninstallResponse"
          },
          "500": {
            "$ref": "#/responses/uninstallResponse"
          }
        }
      }
    }
  },
  "definitions": {
    "Request": {
      "type": "object",
      "properties": {
        "AllNamespaces": {
          "type": "boolean"
        },
        "Deployed": {
          "type": "boolean"
        },
        "Failed": {
          "type": "boolean"
        },
        "Pending": {
          "type": "boolean"
        },
        "Uninstalled": {
          "type": "boolean"
        },
        "Uninstalling": {
          "type": "boolean"
        },
        "kube_apiserver": {
          "type": "string",
          "x-go-name": "KubeAPIServer"
        },
        "kube_token": {
          "type": "string",
          "x-go-name": "KubeToken"
        }
      },
      "x-go-package": "github.com/gojekfarm/albatross/api/list"
    },
    "Response": {
      "type": "object",
      "title": "Response represents the api response for upgrade request.",
      "properties": {
        "data": {
          "type": "string",
          "x-go-name": "Data"
        },
        "error": {
          "description": "Error field is available only when the response status code is non 2xx",
          "type": "string",
          "x-go-name": "Error"
        },
        "status": {
          "type": "string",
          "x-go-name": "Status",
          "example": "deployed"
        }
      },
      "x-go-package": "github.com/gojekfarm/albatross/api/upgrade"
    },
    "globalFlags": {
      "description": "GlobalFlags flags which give context about kubernetes cluster to connect to",
      "type": "object",
      "properties": {
        "kube_apiserver": {
          "type": "string",
          "x-go-name": "KubeAPIServer"
        },
        "kube_token": {
          "type": "string",
          "x-go-name": "KubeToken"
        }
      },
      "x-go-name": "GlobalFlags",
      "x-go-package": "github.com/gojekfarm/albatross/pkg/helmcli/flags"
    },
    "installFlags": {
      "description": "Flags additional flags for installing a release",
      "type": "object",
      "properties": {
        "dry_run": {
          "type": "boolean",
          "x-go-name": "DryRun",
          "example": false
        },
        "kube_apiserver": {
          "type": "string",
          "x-go-name": "KubeAPIServer"
        },
        "kube_token": {
          "type": "string",
          "x-go-name": "KubeToken"
        },
        "version": {
          "type": "string",
          "x-go-name": "Version",
          "example": "1"
        }
      },
      "x-go-name": "Flags",
      "x-go-package": "github.com/gojekfarm/albatross/api/install"
    },
    "installRelease": {
      "description": "Release wrapper for helm release",
      "type": "object",
      "properties": {
        "app_version": {
          "type": "string",
          "x-go-name": "AppVersion",
          "example": "5.7.30"
        },
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "mysql"
        },
        "name": {
          "type": "string",
          "x-go-name": "Name",
          "example": "mysql-5.7"
        },
        "namespace": {
          "type": "string",
          "x-go-name": "Namespace",
          "example": "default"
        },
        "status": {
          "x-go-name": "Status",
          "example": "deployed"
        },
        "updated_at": {
          "x-go-name": "Updated",
          "example": "2021-03-24T12:24:18.450869+05:30"
        },
        "version": {
          "type": "integer",
          "format": "int64",
          "x-go-name": "Version",
          "example": 1
        }
      },
      "x-go-name": "Release",
      "x-go-package": "github.com/gojekfarm/albatross/api/install"
    },
    "installRequestBody": {
      "description": "Request is the body for insatlling a release",
      "type": "object",
      "properties": {
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "stable/mysql"
        },
        "flags": {
          "$ref": "#/definitions/installFlags"
        },
        "values": {
          "type": "object",
          "additionalProperties": {
            "type": "object"
          },
          "x-go-name": "Values",
          "example": {
            "replicaCount": 1
          }
        }
      },
      "x-go-name": "Request",
      "x-go-package": "github.com/gojekfarm/albatross/api/install"
    },
    "installResponseBody": {
      "description": "Response body of install response",
      "type": "object",
      "properties": {
        "data": {
          "type": "string",
          "x-go-name": "Data"
        },
        "error": {
          "description": "Error error message, field is available only when status code is non 2xx",
          "type": "string",
          "x-go-name": "Error"
        },
        "status": {
          "type": "string",
          "x-go-name": "Status",
          "example": "deployed"
        }
      },
      "x-go-name": "Response",
      "x-go-package": "github.com/gojekfarm/albatross/api/install"
    },
    "listRelease": {
      "description": "Release wraps a helm release",
      "type": "object",
      "properties": {
        "app_version": {
          "type": "string",
          "x-go-name": "AppVersion",
          "example": "5.7.30"
        },
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "mysql"
        },
        "name": {
          "type": "string",
          "x-go-name": "Name",
          "example": "mysql-5.7"
        },
        "namespace": {
          "type": "string",
          "x-go-name": "Namespace",
          "example": "default"
        },
        "status": {
          "x-go-name": "Status",
          "example": "deployed"
        },
        "updated_at": {
          "x-go-name": "Updated",
          "example": "2021-03-24T12:24:18.450869+05:30"
        },
        "version": {
          "type": "integer",
          "format": "int64",
          "x-go-name": "Version",
          "example": 1
        }
      },
      "x-go-name": "Release",
      "x-go-package": "github.com/gojekfarm/albatross/api/list"
    },
    "listReponseBody": {
      "description": "Response is the body of /list",
      "type": "object",
      "properties": {
        "error": {
          "description": "Error field is available only when the response status code is non 2xx",
          "type": "string",
          "x-go-name": "Error"
        },
        "releases": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/listRelease"
          },
          "x-go-name": "Releases"
        }
      },
      "x-go-name": "Response",
      "x-go-package": "github.com/gojekfarm/albatross/api/list"
    },
    "uninstallRelease": {
      "description": "Release contains metadata about a helm release object",
      "type": "object",
      "properties": {
        "app_version": {
          "type": "string",
          "x-go-name": "AppVersion",
          "example": "5.7.30"
        },
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "mysql"
        },
        "name": {
          "type": "string",
          "x-go-name": "Name",
          "example": "mysql-5.7"
        },
        "namespace": {
          "type": "string",
          "x-go-name": "Namespace",
          "example": "default"
        },
        "status": {
          "x-go-name": "Status",
          "example": "deployed"
        },
        "updated_at": {
          "x-go-name": "Updated",
          "example": "2021-03-24T12:24:18.450869+05:30"
        },
        "version": {
          "type": "integer",
          "format": "int64",
          "x-go-name": "Version",
          "example": 1
        }
      },
      "x-go-name": "Release",
      "x-go-package": "github.com/gojekfarm/albatross/api/uninstall"
    },
    "uninstallResponseBody": {
      "description": "Response is the body of uninstall route",
      "type": "object",
      "properties": {
        "error": {
          "description": "Error error message, field is available only when status code is non 2xx",
          "type": "string",
          "x-go-name": "Error"
        },
        "release": {
          "$ref": "#/definitions/uninstallRelease"
        },
        "status": {
          "description": "Status status of the release, field is available only when status code is 2xx",
          "type": "string",
          "x-go-name": "Status",
          "example": "uninstalled"
        }
      },
      "x-go-name": "Response",
      "x-go-package": "github.com/gojekfarm/albatross/api/uninstall"
    },
    "upgradeFlags": {
      "description": "Flags additional flags supported while upgrading a release",
      "type": "object",
      "properties": {
        "dry_run": {
          "type": "boolean",
          "x-go-name": "DryRun",
          "example": false
        },
        "install": {
          "type": "boolean",
          "x-go-name": "Install",
          "example": true
        },
        "kube_apiserver": {
          "type": "string",
          "x-go-name": "KubeAPIServer"
        },
        "kube_token": {
          "type": "string",
          "x-go-name": "KubeToken"
        },
        "version": {
          "type": "string",
          "x-go-name": "Version",
          "example": "1"
        }
      },
      "x-go-name": "Flags",
      "x-go-package": "github.com/gojekfarm/albatross/api/upgrade"
    },
    "upgradeReleaseBody": {
      "description": "Release wrapper for helm release",
      "type": "object",
      "properties": {
        "app_version": {
          "type": "string",
          "x-go-name": "AppVersion",
          "example": "5.7.30"
        },
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "mysql"
        },
        "name": {
          "type": "string",
          "x-go-name": "Name",
          "example": "mysql-5.7"
        },
        "namespace": {
          "type": "string",
          "x-go-name": "Namespace",
          "example": "default"
        },
        "status": {
          "x-go-name": "Status",
          "example": "deployed"
        },
        "updated_at": {
          "x-go-name": "Updated",
          "example": "2021-03-24T12:24:18.450869+05:30"
        },
        "version": {
          "type": "integer",
          "format": "int64",
          "x-go-name": "Version",
          "example": 2
        }
      },
      "x-go-name": "Release",
      "x-go-package": "github.com/gojekfarm/albatross/api/upgrade"
    },
    "upgradeRequestBody": {
      "description": "Request is the body for upgrading a release",
      "type": "object",
      "properties": {
        "chart": {
          "type": "string",
          "x-go-name": "Chart",
          "example": "stable/mysql"
        },
        "flags": {
          "$ref": "#/definitions/upgradeFlags"
        },
        "values": {
          "type": "object",
          "additionalProperties": {
            "type": "object"
          },
          "x-go-name": "Values",
          "example": {
            "replicaCount": 1
          }
        }
      },
      "x-go-name": "Request",
      "x-go-package": "github.com/gojekfarm/albatross/api/upgrade"
    }
  },
  "responses": {
    "installResponse": {
      "description": "InstallResponse response from an install request",
      "schema": {
        "$ref": "#/definitions/installResponseBody"
      }
    },
    "listResponse": {
      "description": "ListResponse stub for swagger route for List",
      "schema": {
        "$ref": "#/definitions/listReponseBody"
      }
    },
    "uninstallResponse": {
      "description": "UninstallResponse stub for swagger route for uninstall",
      "schema": {
        "$ref": "#/definitions/uninstallResponseBody"
      }
    },
    "upgradeResponse": {
      "description": "UpgradeResponse response from an upgrade request",
      "schema": {
        "$ref": "#/definitions/Response"
      }
    }
  }
}